(this["webpackJsonpstreamr-chatbox-example"]=this["webpackJsonpstreamr-chatbox-example"]||[]).push([[0],{102:function(e,n,t){"use strict";t.r(n);var a,r,o,i,l,c,s,d,p,u,b,m,f,x,g,h,E,w,y,v,j,O,k,z,S=t(4),C=t.n(S),A=t(46),D=t.n(A),I=t(2),R=t.n(I),T=t(17),q=t(13),B=t(26),L=t(8),P=t(47),F=t.n(P),G=t(7),J=t.n(G),N=t(48),U=t.n(N),M=t(49),W=t.n(M),_=t(16),H=t(18),K=t(19),Q=t(9);function V(e){var n=e.address,t=e.provider,a=Object(S.useState)(""),r=Object(q.a)(a,2),o=r[0],i=r[1];return Object(S.useEffect)((function(){function e(){return(e=Object(T.a)(R.a.mark((function e(){var a;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===n||void 0===n||null==t||"object"!=typeof t){e.next=6;break}return e.next=3,t.lookupAddress(n);case 3:null==(a=e.sent)&&(a=n.substring(0,5).concat("...").concat(n.substring(38,42))),i(a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[n,t]),o}Object(Q.b)(X||(X=a||(a=Object(L.a)(["\n0% {\n    opacity: 0.6;\n  }\n  50% {\n    opacity: 0.2;\n  }\n  100% {\n    opacity: 0;\n  }\n"])))),Object(Q.b)(Y||(Y=r||(r=Object(L.a)(["\n0% {\n    opacity: 0.2;\n  }\n  50% {\n    opacity: 0.6;\n  }\n  100% {\n    opacity: 1;\n  }\n  "]))));var X,Y,Z,$,ee,ne,te,ae,re,oe,ie,le,ce,se,de,pe,ue,be,me,fe,xe,ge,he,Ee,we=Q.a.div(Z||(Z=o||(o=Object(L.a)(['\n  font-family: "Lato", sans-serif;\n'])))),ye=Q.a.button($||($=i||(i=Object(L.a)(["\n  color: inherit;\n  background-color: transparent;\n  border: 0;\n  outline: 0 !important;\n  cursor: pointer;\n"])))),ve=Q.a.main(ee||(ee=l||(l=Object(L.a)(["\n  box-sizing: border-box;\n  width: 100%;\n  padding: calc(2 * #{16px}) #{16px};\n  line-height: calc(#{16px} + #{16px} / 2);\n  color: #888;\n  text-align: center;\n  flex: 1 1 auto;\n"])))),je=Q.a.div(ne||(ne=c||(c=Object(L.a)(["\n  padding: 30px 30px 20px;\n  border-bottom: 2px solid white;\n  overflow-y: scroll;\n  height: 60vh;\n"])))),Oe=Q.a.footer(te||(te=s||(s=Object(L.a)(["\n  box-sizing: border-box;\n  display: flex;\n  width: 100%;\n  padding: 16px;\n  border-top: 1px solid #ddd;\n  align-items: center;\n  justify-content: space-around;\n  flex: 0 0 auto;\n"])))),ke=Q.a.textarea(ae||(ae=d||(d=Object(L.a)(["\n  box-sizing: border-box;\n  width: 100%;\n  margin: 0;\n  height: calc(#{16px} + #{16px} / 2);\n  padding: 0 calc(#{16px} / 2);\n  font-family: inherit;\n  font-size: 16px;\n  line-height: calc(#{16px} + #{16px} / 2);\n  color: #888;\n  background-color: none;\n  border: 0;\n  outline: 0 !important;\n  resize: none;\n  overflow: hidden;\n\n  &::placeholder {\n    color: #888;\n  }\n"])))),ze=Q.a.header(re||(re=p||(p=Object(L.a)(["\n  box-sizing: border-box;\n  display: flex;\n  width: 100%;\n  padding: 16px;\n  color: #fff;\n  background-color: #0360a5;\n  align-items: center;\n  justify-content: space-around;\n  flex: 0 0 auto;\n"])))),Se=Q.a.footer(oe||(oe=u||(u=Object(L.a)(["\n  box-sizing: border-box;\n  display: flex;\n  width: 100%;\n  padding: 16px;\n  border-top: 1px solid #ddd;\n  align-items: center;\n  justify-content: space-around;\n  border-bottom-right-radius: 12px;\n  border-bottom-left-radius: 12px;\n"])))),Ce=Q.a.li(ie||(ie=b||(b=Object(L.a)(['\n  &:after {\n    visibility: hidden;\n    display: block;\n    font-size: 0;\n    content: " ";\n    clear: both;\n    height: 0;\n  }\n'])))),Ae=Q.a.div(le||(le=m||(m=Object(L.a)(['\n  background: #86bb71;\n  float: left;\n  color: white;\n  padding: 18px 20px;\n  line-height: 26px;\n  font-size: 16px;\n  border-radius: 7px;\n  margin-bottom: 30px;\n  width: 70%;\n  position: relative;\n\n  &:after {\n    bottom: 100%;\n    left: 7%;\n    border: solid transparent;\n    content: " ";\n    height: 0;\n    width: 0;\n    position: absolute;\n    pointer-events: none;\n    border-bottom-color: #86bb71 !important;\n    border-width: 10px;\n    margin-left: -10px;\n  }\n'])))),De=Q.a.div(ce||(ce=f||(f=Object(L.a)(['\n  background: #94c2ed;\n  float: right;\n  color: white;\n  padding: 18px 20px;\n  line-height: 26px;\n  font-size: 16px;\n  border-radius: 7px;\n  margin-bottom: 30px;\n  width: 70%;\n  position: relative;\n\n  &:after {\n    bottom: 100%;\n    left: 7%;\n    border: solid transparent;\n    content: " ";\n    height: 0;\n    width: 0;\n    position: absolute;\n    pointer-events: none;\n    border-bottom-color: #86bb71;\n    border-width: 10px;\n    margin-left: -10px;\n    border-bottom-color: #94c2ed;\n    left: 93%;\n  }\n'])))),Ie=Q.a.div(se||(se=x||(x=Object(L.a)(["\n  margin-bottom: 15px;\n  text-align: right;\n"])))),Re=Q.a.div(de||(de=g||(g=Object(L.a)(["\n  margin-bottom: 15px;\n  text-align: left;\n"])))),Te=Q.a.ul(pe||(pe=h||(h=Object(L.a)(["\n  list-style: none;\n  padding-left: 0px;\n"])))),qe=Q.a.div(ue||(ue=E||(E=Object(L.a)(["\n  padding: 30px 30px 20px;\n  border-bottom: 2px solid white;\n  overflow-y: scroll;\n  height: 250px;\n"])))),Be=Q.a.button(be||(be=w||(w=Object(L.a)(["\n  color: inherit;\n  background-color: transparent;\n  border: 0;\n  outline: 0 !important;\n  cursor: pointer;\n  position: fixed;\n  bottom: 0;\n  right: 0;\n  width: 52px;\n  height: 52px;\n  color: #fff;\n  background-color: #0360a5;\n  background-position: center center;\n  background-repeat: no-repeat;\n  box-shadow: 12px 15px 20px 0 rgba(46, 61, 73, 0.15);\n  border: 0;\n  border-radius: 50%;\n  cursor: pointer;\n  margin: 16px;\n  ","\n"]))),(function(e){return e.open?"\n      -webkit-animation: display .2s linear forwards;\n      animation: display .2s linear forwards;\n      display: block !important;\n      ":"\n    -webkit-animation: fadeinout .2s linear forwards;\n      animation: fadeinout .2s linear forwards;\n      display: none !important\n"})),Le=Q.a.button(me||(me=y||(y=Object(L.a)(["\n  color: inherit;\n  background-color: transparent;\n  border: 0;\n  outline: 0 !important;\n  cursor: pointer;\n  position: fixed;\n  bottom: 0;\n  right: 0;\n  width: 52px;\n  height: 52px;\n  color: #fff;\n  background-color: #0360a5;\n  background-position: center center;\n  background-repeat: no-repeat;\n  box-shadow: 12px 15px 20px 0 rgba(46, 61, 73, 0.15);\n  border: 0;\n  border-radius: 50%;\n  cursor: pointer;\n  display: none;\n  margin: 16px 84px 16px 16px;\n  ","\n"]))),(function(e){return e.open?"\n      -webkit-animation: display .2s linear forwards;\n      animation: display .2s linear forwards;\n      display: block !important;\n      ":"\n    -webkit-animation: fadeinout .2s linear forwards;\n      animation: fadeinout .2s linear forwards;\n      display: none !important\n"})),Pe=Q.a.section(fe||(fe=v||(v=Object(L.a)(["\n  display: flex;\n  position: absolute;\n  box-shadow: 5px 5px 25px 0 rgba(46, 61, 73, 0.2);\n  flex-direction: column;\n  display: none;\n  bottom: 84px;\n  right: 16px;\n  width: 377px;\n  height: auto;\n  background-color: #fff;\n  border-radius: 16px;\n  ","\n"]))),(function(e){return e.open?"\n      -webkit-animation: display .2s linear forwards;\n      animation: display .2s linear forwards;\n      display: block !important;\n      ":"\n    -webkit-animation: fadeinout .2s linear forwards;\n      animation: fadeinout .2s linear forwards;\n      display: none !important\n"})),Fe=Q.a.section(xe||(xe=j||(j=Object(L.a)(["\n  display: flex;\n  position: absolute;\n  box-shadow: 5px 5px 25px 0 rgba(46, 61, 73, 0.2);\n  flex-direction: column;\n  display: none;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  width: 377px;\n  background-color: #fff;\n  ","\n"]))),(function(e){return e.open?"\n      -webkit-animation: display .2s linear forwards;\n      animation: display .2s linear forwards;\n      display: block !important;\n      ":"\n    -webkit-animation: fadeinout .2s linear forwards;\n      animation: fadeinout .2s linear forwards;\n      display: none !important\n"})),Ge=Q.a.header(ge||(ge=O||(O=Object(L.a)(["\n  box-sizing: border-box;\n  display: flex;\n  width: 100%;\n  padding: 16px;\n  color: #fff;\n  background-color: #0360a5;\n  align-items: center;\n  justify-content: space-around;\n  border-top-right-radius: 12px;\n  border-top-left-radius: 12px;\n"])))),Je=Q.a.h1(he||(he=k||(k=Object(L.a)(["\n  margin: 0;\n  font-size: 16px;\n  line-height: 1;\n"])))),Ne=Q.a.main(Ee||(Ee=z||(z=Object(L.a)(["\n  box-sizing: border-box;\n  width: 100%;\n  padding: 32\u0161x 16px;\n  line-height: 24px;\n  color: #888;\n  text-align: center;\n"]))));function Ue(e){e.theme;var n=e.provider,t=e.address,a=e.streamID,r=e.DEBUG,o=void 0===r||r,i=Object(S.useState)([]),l=Object(q.a)(i,2),c=l[0],s=l[1],d=Object(S.useState)(""),p=Object(q.a)(d,2),u=p[0],b=p[1],m=Object(S.useState)(),f=Object(q.a)(m,2),x=f[0],g=f[1];Object(S.useEffect)((function(){(function(){var e=Object(T.a)(R.a.mark((function e(){var n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new F.a({auth:{ethereum:window.ethereum}}),g(n),o&&console.log("Subscribing..."),e.next=5,n.subscribe({stream:a},(function(e,n){console.log("message received",n);var a=U.a.sanitize(e.msg),r=n.messageId.publisherId,o=(new W.a).from(new Date(n.messageId.timestamp)),i={self:r===t.toLowerCase(),from:r,text:a,when:o};s((function(e){return[].concat(Object(B.a)(e),[i])}))}));case 5:o&&console.log("Subscribed");case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[a,t]);var h=Object(S.useState)(!1),E=Object(q.a)(h,2),w=E[0],y=E[1],v=Object(S.useState)(!1),j=Object(q.a)(v,2),O=j[0],k=j[1],z=Object(S.useState)(!0),A=Object(q.a)(z,2),D=A[0],I=A[1],L=Object(S.useState)(!1),P=Object(q.a)(L,2),G=P[0],J=P[1],N=Object(S.useState)(!1),M=Object(q.a)(N,2),H=M[0],K=M[1],Q=function(e){b(e.target.value)},X=function(){var e=Object(T.a)(R.a.mark((function e(){var n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o&&console.log("Publishing message: "+u),n={msg:u},e.next=4,x.publish(a,n);case 4:b(""),o&&console.log("message sent");case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(S.useEffect)((function(){var e=function(){var e=Object(T.a)(R.a.mark((function e(n){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Enter"!==n.code&&"NumpadEnter"!==n.code){e.next=4;break}return n.preventDefault(),e.next=4,X();case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}})),C.a.createElement(we,null,C.a.createElement(Be,{onClick:function(){k(!0),J(!0)},open:D},C.a.createElement(_.a,{icon:["fa","comment"],size:"2x"})),C.a.createElement(Le,{onClick:function(){k(!1),J(!1)},open:G},C.a.createElement(_.a,{icon:["fa","times"],size:"2x"})),C.a.createElement(Pe,{open:O},C.a.createElement(Ge,null,C.a.createElement("aside",{style:{flex:3}},C.a.createElement(_.a,{icon:["fa","user-circle"],size:"4x","aria-hidden":"true",style:{marginTop:"-32px",backgroundColor:"#0360a5",border:"5px solid rgba(0,0,0,0.1)",borderRadius:"50%"}})),C.a.createElement("aside",{style:{flex:8}},C.a.createElement(Je,null,C.a.createElement("small",null,"Publishing as:"),C.a.createElement("br",null),C.a.createElement(V,{address:t,provider:n}))),C.a.createElement("aside",{style:{flex:1}},C.a.createElement(ye,{onClick:function(){K(!0),y(!0),k(!1),I(!1),J(!1)}},C.a.createElement(_.a,{icon:["fa","window-maximize"]})))),C.a.createElement(Ne,null,C.a.createElement(qe,null,C.a.createElement(Te,null,0===c.length&&C.a.createElement("div",null,"A fully decentralised chatbox ",C.a.createElement("br",null)," powered by Streamr."),c.map((function(e,t){return C.a.createElement(Ce,{key:t},e.self&&C.a.createElement("div",null,C.a.createElement(Ie,null,C.a.createElement("small",null,e.when),"\xa0\xa0\xa0",C.a.createElement("span",null,C.a.createElement(V,{address:e.from,provider:n}))),C.a.createElement(De,null,e.text)),!e.self&&C.a.createElement("div",null,C.a.createElement(Re,null,C.a.createElement("span",null,C.a.createElement(V,{address:e.from,provider:n})),"\xa0\xa0\xa0",C.a.createElement("small",null,e.when)),C.a.createElement(Ae,null,e.text)))}))))),C.a.createElement(Se,null,C.a.createElement("aside",{style:{flex:10}},C.a.createElement(ke,{type:"text",placeholder:"Type your message here...",autoFocus:!0,onChange:Q,value:u})),C.a.createElement("aside",{style:{flex:1,color:"#888",textAlign:"center"}},C.a.createElement(_.a,{icon:["fa","paper-plane"],onClick:X})))),C.a.createElement(Fe,{open:w},C.a.createElement(ze,null,C.a.createElement("aside",{style:{flex:3}},C.a.createElement(_.a,{icon:["fa","user-circle"],size:"3x",style:H?{marginTop:"0px",backgroundColor:"#0360a5",border:"5px solid rgba(0,0,0,0.1)",borderRadius:"50%"}:{marginTop:"-32px",backgroundColor:"#0360a5",border:"5px solid rgba(0,0,0,0.1)",borderRadius:"50%"}})),C.a.createElement("aside",{style:{flex:6}},C.a.createElement(Je,null,C.a.createElement("small",null,"Publishing as:"),C.a.createElement("br",null),C.a.createElement(V,{address:t,provider:n}))),C.a.createElement("aside",{style:{flex:3,textAlign:"right"}},C.a.createElement(ye,{onClick:function(){K(!1),y(!1),k(!0),I(!0),J(!0)}},C.a.createElement(_.a,{icon:["fa","window-restore"]})),C.a.createElement(ye,{onClick:function(){y(!1),I(!0)}},C.a.createElement(_.a,{icon:["fa","times"]})))),C.a.createElement(ve,{style:{flex:1}},C.a.createElement(je,null,C.a.createElement(Te,null,0===c.length&&C.a.createElement("div",null,"A fully decentralised chatbox ",C.a.createElement("br",null)," powered by Streamr."),c.map((function(e,t){return C.a.createElement(Ce,{key:t},e.self&&C.a.createElement("div",null,C.a.createElement(Ie,null,C.a.createElement("small",null,e.when),"\xa0\xa0\xa0",C.a.createElement("span",null,C.a.createElement(V,{address:e.from,provider:n}))),C.a.createElement(De,null,e.text)),!e.self&&C.a.createElement("div",null,C.a.createElement(Re,null,C.a.createElement("span",null,C.a.createElement(V,{address:e.from,provider:n})),"\xa0\xa0\xa0",C.a.createElement("small",null,e.when)),C.a.createElement(Ae,null,e.text)))}))))),C.a.createElement(Oe,null,C.a.createElement("aside",{style:{flex:10}},C.a.createElement(ke,{type:"text",placeholder:"Type your message here...",autoFocus:!0,onChange:Q,value:u})),C.a.createElement("aside",{style:{flex:1,color:"#888",textAlign:"center"}},C.a.createElement(_.a,{icon:["fa","paper-plane"],onClick:X})))))}H.b.add(K.a,K.c,K.d,K.e,K.f,K.b),Ue.propTypes={theme:J.a.object,provider:J.a.object.isRequired,address:J.a.string.isRequired,streamID:J.a.string.isRequired,DEBUG:J.a.bool};var Me=Ue,We=(t(91),t(101).ethers);var _e=function(){var e=Object(S.useState)(),n=Object(q.a)(e,2),t=n[0],a=n[1],r=Object(S.useState)(),o=Object(q.a)(r,2),i=o[0],l=o[1],c=Object(S.useState)(!1),s=Object(q.a)(c,2),d=s[0],p=s[1];return Object(S.useEffect)((function(){(function(){var e=Object(T.a)(R.a.mark((function e(){var n,t,r;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new We.providers.Web3Provider(window.ethereum,"any"),e.next=3,n.send("eth_requestAccounts",[]);case 3:return t=n.getSigner(),e.next=6,t.getAddress();case 6:r=e.sent,l(n),a(r),p(!0);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),C.a.createElement("div",{className:"App"},d&&C.a.createElement(Me,{provider:i,address:t,streamID:"0x35d389B751943Cbf3fE3620a668566E97D5f0144/troll"}))};D.a.render(C.a.createElement(C.a.StrictMode,null,C.a.createElement(_e,null)),document.getElementById("root"))},58:function(e,n,t){e.exports=t(102)},91:function(e,n,t){},93:function(e,n){}},[[58,1,2]]]);
//# sourceMappingURL=main.a545c5ca.chunk.js.map