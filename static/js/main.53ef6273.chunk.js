(this["webpackJsonpstreamr-chatbox-example"]=this["webpackJsonpstreamr-chatbox-example"]||[]).push([[0],{55:function(e,n,t){e.exports=t(99)},88:function(e,n,t){},90:function(e,n){},99:function(e,n,t){"use strict";t.r(n);var a,r,o,i,l,c,s,d,p,u,b,m,f,x,h,g,E,w,y,v,j,O,k,S,z=t(4),C=t.n(z),N=t(43),A=t.n(N),D=t(2),I=t.n(D),R=t(15),T=t(12),q=t(23),B=t(7),P=t(44),L=t.n(P),F=t(16),G=t.n(F),J=t(45),U=t.n(J),M=t(46),W=t.n(M),_=t(8);function H(e){var n=e.address,t=e.provider,a=Object(z.useState)(""),r=Object(T.a)(a,2),o=r[0],i=r[1];return Object(z.useEffect)((function(){function e(){return(e=Object(R.a)(I.a.mark((function e(){var a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===n||void 0===n||null==t||"object"!=typeof t){e.next=6;break}return e.next=3,t.lookupAddress(n);case 3:null==(a=e.sent)&&(a=n.substring(0,5).concat("...").concat(n.substring(38,42))),i(a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[n,t]),o}Object(_.b)(K||(K=a||(a=Object(B.a)(["\n0% {\n    opacity: 0.6;\n  }\n  50% {\n    opacity: 0.2;\n  }\n  100% {\n    opacity: 0;\n  }\n"])))),Object(_.b)(Q||(Q=r||(r=Object(B.a)(["\n0% {\n    opacity: 0.2;\n  }\n  50% {\n    opacity: 0.6;\n  }\n  100% {\n    opacity: 1;\n  }\n  "]))));var K,Q,V,X,Y,Z,$,ee,ne,te,ae,re,oe,ie,le,ce,se,de,pe,ue,be,me,fe,xe,he=_.a.div(V||(V=o||(o=Object(B.a)(['\n  font-family: "Lato", sans-serif;\n'])))),ge=_.a.button(X||(X=i||(i=Object(B.a)(["\n  color: inherit;\n  backgroundcolor: transparent;\n  border: 0;\n  outline: 0 !important;\n  cursor: pointer;\n"])))),Ee=_.a.main(Y||(Y=l||(l=Object(B.a)(["\n  box-sizing: border-box;\n  width: 100%;\n  padding: calc(2 * #{16px}) #{16px};\n  line-height: calc(#{16px} + #{16px} / 2);\n  color: #888;\n  text-align: center;\n  flex: 1 1 auto;\n"])))),we=_.a.div(Z||(Z=c||(c=Object(B.a)(["\n  padding: 30px 30px 20px;\n  border-bottom: 2px solid white;\n  overflow-y: scroll;\n  height: 60vh;\n"])))),ye=_.a.footer($||($=s||(s=Object(B.a)(["\n  box-sizing: border-box;\n  display: flex;\n  width: 100%;\n  padding: 16px;\n  border-top: 1px solid #ddd;\n  align-items: center;\n  justify-content: space-around;\n  flex: 0 0 auto;\n"])))),ve=_.a.textarea(ee||(ee=d||(d=Object(B.a)(["\n  box-sizing: border-box;\n  width: 100%;\n  margin: 0;\n  height: calc(#{16px} + #{16px} / 2);\n  padding: 0 calc(#{16px} / 2);\n  font-family: inherit;\n  font-size: 16px;\n  line-height: calc(#{16px} + #{16px} / 2);\n  color: #888;\n  background-color: none;\n  border: 0;\n  outline: 0 !important;\n  resize: none;\n  overflow: hidden;\n\n  &::placeholder {\n    color: #888;\n  }\n"])))),je=_.a.header(ne||(ne=p||(p=Object(B.a)(["\n  box-sizing: border-box;\n  display: flex;\n  width: 100%;\n  padding: 16px;\n  color: #fff;\n  background-color: #0360a5;\n  align-items: center;\n  justify-content: space-around;\n  flex: 0 0 auto;\n"])))),Oe=_.a.footer(te||(te=u||(u=Object(B.a)(["\n  box-sizing: border-box;\n  display: flex;\n  width: 100%;\n  padding: 16px;\n  border-top: 1px solid #ddd;\n  align-items: center;\n  justify-content: space-around;\n  border-bottom-right-radius: 12px;\n  border-bottom-left-radius: 12px;\n"])))),ke=_.a.li(ae||(ae=b||(b=Object(B.a)(['\n  &:after {\n    visibility: hidden;\n    display: block;\n    font-size: 0;\n    content: " ";\n    clear: both;\n    height: 0;\n  }\n'])))),Se=_.a.div(re||(re=m||(m=Object(B.a)(['\n  background: #86bb71;\n  float: left;\n  color: white;\n  padding: 18px 20px;\n  line-height: 26px;\n  font-size: 16px;\n  border-radius: 7px;\n  margin-bottom: 30px;\n  width: 70%;\n  position: relative;\n\n  &:after {\n    bottom: 100%;\n    left: 7%;\n    border: solid transparent;\n    content: " ";\n    height: 0;\n    width: 0;\n    position: absolute;\n    pointer-events: none;\n    border-bottom-color: #86bb71 !important;\n    border-width: 10px;\n    margin-left: -10px;\n  }\n'])))),ze=_.a.div(oe||(oe=f||(f=Object(B.a)(['\n  background: #94c2ed;\n  float: right;\n  color: white;\n  padding: 18px 20px;\n  line-height: 26px;\n  font-size: 16px;\n  border-radius: 7px;\n  margin-bottom: 30px;\n  width: 70%;\n  position: relative;\n\n  &:after {\n    bottom: 100%;\n    left: 7%;\n    border: solid transparent;\n    content: " ";\n    height: 0;\n    width: 0;\n    position: absolute;\n    pointer-events: none;\n    border-bottom-color: #86bb71;\n    border-width: 10px;\n    margin-left: -10px;\n    border-bottom-color: #94c2ed;\n    left: 93%;\n  }\n'])))),Ce=_.a.div(ie||(ie=x||(x=Object(B.a)(["\n  margin-bottom: 15px;\n  text-align: right;\n"])))),Ne=_.a.div(le||(le=h||(h=Object(B.a)(["\n  margin-bottom: 15px;\n  text-align: left;\n"])))),Ae=_.a.ul(ce||(ce=g||(g=Object(B.a)(["\n  list-style: none;\n  padding-left: 0px;\n"])))),De=_.a.div(se||(se=E||(E=Object(B.a)(["\n  padding: 30px 30px 20px;\n  border-bottom: 2px solid white;\n  overflow-y: scroll;\n  height: 250px;\n"])))),Ie=_.a.button(de||(de=w||(w=Object(B.a)(["\n  color: inherit;\n  background-color: transparent;\n  border: 0;\n  outline: 0 !important;\n  cursor: pointer;\n  position: fixed;\n  bottom: 0;\n  right: 0;\n  width: 52px;\n  height: 52px;\n  color: #fff;\n  background-color: #0360a5;\n  background-position: center center;\n  background-repeat: no-repeat;\n  box-shadow: 12px 15px 20px 0 rgba(46, 61, 73, 0.15);\n  border: 0;\n  border-radius: 50%;\n  cursor: pointer;\n  margin: 16px;\n  ","\n"]))),(function(e){return e.open?"\n      -webkit-animation: display .2s linear forwards;\n      animation: display .2s linear forwards;\n      display: block !important;\n      ":"\n    -webkit-animation: fadeinout .2s linear forwards;\n      animation: fadeinout .2s linear forwards;\n      display: none !important\n"})),Re=_.a.button(pe||(pe=y||(y=Object(B.a)(["\n  color: inherit;\n  background-color: transparent;\n  border: 0;\n  outline: 0 !important;\n  cursor: pointer;\n  position: fixed;\n  bottom: 0;\n  right: 0;\n  width: 52px;\n  height: 52px;\n  color: #fff;\n  background-color: #0360a5;\n  background-position: center center;\n  background-repeat: no-repeat;\n  box-shadow: 12px 15px 20px 0 rgba(46, 61, 73, 0.15);\n  border: 0;\n  border-radius: 50%;\n  cursor: pointer;\n  display: none;\n  margin: 16px 84px 16px 16px;\n  ","\n"]))),(function(e){return e.open?"\n      -webkit-animation: display .2s linear forwards;\n      animation: display .2s linear forwards;\n      display: block !important;\n      ":"\n    -webkit-animation: fadeinout .2s linear forwards;\n      animation: fadeinout .2s linear forwards;\n      display: none !important\n"})),Te=_.a.section(ue||(ue=v||(v=Object(B.a)(["\n  display: flex;\n  position: absolute;\n  box-shadow: 5px 5px 25px 0 rgba(46, 61, 73, 0.2);\n  flex-direction: column;\n  display: none;\n  bottom: 84px;\n  right: 16px;\n  width: 377px;\n  height: auto;\n  background-color: #fff;\n  border-radius: 16px;\n  ","\n"]))),(function(e){return e.open?"\n      -webkit-animation: display .2s linear forwards;\n      animation: display .2s linear forwards;\n      display: block !important;\n      ":"\n    -webkit-animation: fadeinout .2s linear forwards;\n      animation: fadeinout .2s linear forwards;\n      display: none !important\n"})),qe=_.a.section(be||(be=j||(j=Object(B.a)(["\n  display: flex;\n  position: absolute;\n  box-shadow: 5px 5px 25px 0 rgba(46, 61, 73, 0.2);\n  flex-direction: column;\n  display: none;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  width: 377px;\n  background-color: #fff;\n  ","\n"]))),(function(e){return e.open?"\n      -webkit-animation: display .2s linear forwards;\n      animation: display .2s linear forwards;\n      display: block !important;\n      ":"\n    -webkit-animation: fadeinout .2s linear forwards;\n      animation: fadeinout .2s linear forwards;\n      display: none !important\n"})),Be=_.a.header(me||(me=O||(O=Object(B.a)(["\n  box-sizing: border-box;\n  display: flex;\n  width: 100%;\n  padding: 16px;\n  color: #fff;\n  background-color: #0360a5;\n  align-items: center;\n  justify-content: space-around;\n  border-top-right-radius: 12px;\n  border-top-left-radius: 12px;\n"])))),Pe=_.a.h1(fe||(fe=k||(k=Object(B.a)(["\n  margin: 0;\n  font-size: 16px;\n  line-height: 1;\n"])))),Le=_.a.main(xe||(xe=S||(S=Object(B.a)(["\n  box-sizing: border-box;\n  width: 100%;\n  padding: 32\u0161x 16px;\n  line-height: 24px;\n  color: #888;\n  text-align: center;\n"]))));function Fe(e){e.theme;var n=e.provider,t=e.address,a=e.streamID,r=e.DEBUG,o=void 0===r||r,i=Object(z.useState)([]),l=Object(T.a)(i,2),c=l[0],s=l[1],d=Object(z.useState)(""),p=Object(T.a)(d,2),u=p[0],b=p[1],m=Object(z.useState)(),f=Object(T.a)(m,2),x=f[0],h=f[1];Object(z.useEffect)((function(){(function(){var e=Object(R.a)(I.a.mark((function e(){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new L.a({auth:{ethereum:window.ethereum}}),h(n),o&&console.log("Subscribing..."),e.next=5,n.subscribe({stream:a},(function(e,n){console.log("message received",n);var a=U.a.sanitize(e.msg),r=n.messageId.publisherId,o=(new W.a).from(new Date(n.messageId.timestamp)),i={type:r===t,from:r,text:a,when:o};s((function(e){return[].concat(Object(q.a)(e),[i])}))}));case 5:o&&console.log("Subscribed");case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[a,t]);var g=Object(z.useState)(!1),E=Object(T.a)(g,2),w=E[0],y=E[1],v=Object(z.useState)(!1),j=Object(T.a)(v,2),O=j[0],k=j[1],S=Object(z.useState)(!0),N=Object(T.a)(S,2),A=N[0],D=N[1],B=Object(z.useState)(!1),P=Object(T.a)(B,2),F=P[0],G=P[1],J=Object(z.useState)(!1),M=Object(T.a)(J,2),_=M[0],K=M[1],Q=function(e){b(e.target.value)},V=function(){var e=Object(R.a)(I.a.mark((function e(){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o&&console.log("Publishing message: "+u),n={msg:u},e.next=4,x.publish(a,n);case 4:b(""),o&&console.log("message sent");case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(z.useEffect)((function(){var e=function(){var e=Object(R.a)(I.a.mark((function e(n){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Enter"!==n.code&&"NumpadEnter"!==n.code){e.next=4;break}return n.preventDefault(),e.next=4,V();case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}})),C.a.createElement(he,null,C.a.createElement(Ie,{onClick:function(){k(!0),G(!0)},open:A},C.a.createElement("i",{className:"fa fa-comment fa-2x","aria-hidden":"true"})),C.a.createElement(Re,{onClick:function(){k(!1),G(!1)},open:F},C.a.createElement("i",{className:"fa fa-times fa-2x","aria-hidden":"true"})),C.a.createElement(Te,{open:O},C.a.createElement(Be,null,C.a.createElement("aside",{style:{flex:3}},C.a.createElement("i",{className:"fa fa-user-circle fa-4x","aria-hidden":"true",style:{marginTop:"-32px",backgroundColor:"#0360a5",border:"5px solid rgba(0,0,0,0.1)",borderRadius:"50%"}})),C.a.createElement("aside",{style:{flex:8}},C.a.createElement(Pe,null,C.a.createElement("small",null,"Publishing as:"),C.a.createElement("br",null),C.a.createElement(H,{address:t,provider:n}))),C.a.createElement("aside",{style:{flex:1}},C.a.createElement(ge,{onClick:function(){K(!0),y(!0),k(!1),D(!1),G(!1)}},C.a.createElement("i",{className:"fa fa-window-maximize","aria-hidden":"true"})))),C.a.createElement(Le,null,C.a.createElement(De,null,C.a.createElement(Ae,null,0===c.length&&C.a.createElement("div",null,"A fully decentralised chatbox ",C.a.createElement("br",null)," powered by Streamr."),c.map((function(e,t){return C.a.createElement(ke,{key:t},e.self&&C.a.createElement("div",null,C.a.createElement(Ce,null,C.a.createElement("small",null,e.when),"\xa0\xa0\xa0",C.a.createElement("span",null,C.a.createElement(H,{address:e.from,provider:n}))),C.a.createElement(ze,null,e.text)),!e.self&&C.a.createElement("div",null,C.a.createElement(Ne,null,C.a.createElement("span",null,C.a.createElement(H,{address:e.from,provider:n})),"\xa0\xa0\xa0",C.a.createElement("small",null,e.when)),C.a.createElement(Se,null,e.text)))}))))),C.a.createElement(Oe,null,C.a.createElement("aside",{style:{flex:10}},C.a.createElement(ve,{type:"text",placeholder:"Type your message here...",autoFocus:!0,onChange:Q,value:u})),C.a.createElement("aside",{style:{flex:1,color:"#888",textAlign:"center"}},C.a.createElement("i",{className:"fa fa-paper-plane","aria-hidden":"true",onClick:V})))),C.a.createElement(qe,{open:w},C.a.createElement(je,null,C.a.createElement("aside",{style:{flex:3}},C.a.createElement("i",{className:"fa fa-user-circle fa-3x","aria-hidden":"true",style:_?{marginTop:"0px",backgroundColor:"#0360a5",border:"5px solid rgba(0,0,0,0.1)",borderRadius:"50%"}:{marginTop:"-32px",backgroundColor:"#0360a5",border:"5px solid rgba(0,0,0,0.1)",borderRadius:"50%"}})),C.a.createElement("aside",{style:{flex:6}},C.a.createElement(Pe,null,C.a.createElement("small",null,"Publishing as:"),C.a.createElement("br",null),C.a.createElement(H,{address:t,provider:n}))),C.a.createElement("aside",{style:{flex:3,textAlign:"right"}},C.a.createElement(ge,{onClick:function(){K(!1),y(!1),k(!0),D(!0),G(!0)}},C.a.createElement("i",{className:"fa fa-window-restore","aria-hidden":"true"})),C.a.createElement(ge,{onClick:function(){y(!1),D(!0)}},C.a.createElement("i",{className:"fa fa-times","aria-hidden":"true"})))),C.a.createElement(Ee,{style:{flex:1}},C.a.createElement(we,null,C.a.createElement(Ae,null,0===c.length&&C.a.createElement("div",null,"A fully decentralised chatbox ",C.a.createElement("br",null)," powered by Streamr."),c.map((function(e,t){return C.a.createElement(ke,{key:t},e.self&&C.a.createElement("div",null,C.a.createElement(Ce,null,C.a.createElement("small",null,e.when),"\xa0\xa0\xa0",C.a.createElement("span",null,C.a.createElement(H,{address:e.from,provider:n}))),C.a.createElement(ze,null,e.text)),!e.self&&C.a.createElement("div",null,C.a.createElement(Ne,null,C.a.createElement("span",null,C.a.createElement(H,{address:e.from,provider:n})),"\xa0\xa0\xa0",C.a.createElement("small",null,e.when)),C.a.createElement(Se,null,e.text)))}))))),C.a.createElement(ye,null,C.a.createElement("aside",{style:{flex:10}},C.a.createElement(ve,{type:"text",placeholder:"Type your message here...",autoFocus:!0,onChange:Q,value:u})),C.a.createElement("aside",{style:{flex:1,color:"#888",textAlign:"center"}},C.a.createElement("i",{className:"fa fa-paper-plane","aria-hidden":"true",onClick:V})))))}Fe.propTypes={theme:G.a.object,provider:G.a.object.isRequired,address:G.a.string.isRequired,streamID:G.a.string.isRequired,DEBUG:G.a.bool};var Ge=Fe,Je=(t(88),t(98).ethers);var Ue=function(){var e=Object(z.useState)(),n=Object(T.a)(e,2),t=n[0],a=n[1],r=Object(z.useState)(),o=Object(T.a)(r,2),i=o[0],l=o[1],c=Object(z.useState)(!1),s=Object(T.a)(c,2),d=s[0],p=s[1];return Object(z.useEffect)((function(){(function(){var e=Object(R.a)(I.a.mark((function e(){var n,t,r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Je.providers.Web3Provider(window.ethereum,"any"),e.next=3,n.send("eth_requestAccounts",[]);case 3:return t=n.getSigner(),e.next=6,t.getAddress();case 6:r=e.sent,l(n),a(r),p(!0);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),C.a.createElement("div",{className:"App"},d&&C.a.createElement(Ge,{provider:i,address:t,streamID:"0x35d389B751943Cbf3fE3620a668566E97D5f0144/troll"}))};A.a.render(C.a.createElement(C.a.StrictMode,null,C.a.createElement(Ue,null)),document.getElementById("root"))}},[[55,1,2]]]);
//# sourceMappingURL=main.53ef6273.chunk.js.map